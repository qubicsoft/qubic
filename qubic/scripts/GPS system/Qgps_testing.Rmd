---
jupyter:
  jupytext:
    formats: ipynb,Rmd
    text_representation:
      extension: .Rmd
      format_name: rmarkdown
      format_version: '1.2'
      jupytext_version: 1.16.4
  kernelspec:
    display_name: Python 3 (ipykernel)
    language: python
    name: python3
---

```{python}
import numpy as np
import matplotlib.pyplot as plt
import datetime as dt

from qubic.lib.Qgps import GPS, GPS_old

# %matplotlib widget
```

```{python}
data_path = "calsource_orientation_20240322.dat"
observation_date = np.array([dt.datetime(2024, 3, 22, 10, 8, 00)]) # np.array([dt.datetime(2024, 3, 22, 9, 47, 49), dt.datetime(2024, 3, 22, 16, 13, 49, 500000)])#
```

```{python}
distance_between_antennas = 1
distance_calsource = 0.5
gps_old = GPS_old(data_path, distance_between_antennas, distance_calsource, observation_date)
```

```{python}
plt.plot(gps_old.rpN)
plt.show()
```

```{python}
position_ini_antenna1 = gps_old.position_antenna1[:, 0]
position_ini_antenna2 = gps_old.position_antenna2[:, 0]
position_ini_calsource = gps_old.position_calsource[:, 0]
position_ini_calsource -= np.array([0, 0, 0.5])
gps = GPS(data_path, position_ini_antenna1, position_ini_antenna2, position_ini_calsource, observation_date, position_qubic = np.array([0, 0, 0]), ini_wrt_antenna2=False)
```

```{python}
position_ini_antenna1
```

```{python}
gps.plot_system()
```

```{python}

```

```{python}

```

```{python}

```
